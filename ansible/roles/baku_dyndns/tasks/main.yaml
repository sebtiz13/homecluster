- name: Install DynDNS client package
  ansible.builtin.apt:
    pkg:
      - ddclient

- name: Configure DynDNS
  vars:
    username: "{{ dyndns.username }}"
    password: "{{ dyndns.password }}"
    domain: "{{ dyndns.domain }}"
  ansible.builtin.template:
    dest: /etc/ddclient.conf
    src: ddclient.conf.j2
    mode: "u=rwx,g=rx,o=rx"
    backup: true
