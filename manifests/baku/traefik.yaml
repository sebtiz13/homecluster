---
# Source: common-app/templates/application.yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: baku-traefik
  labels:    
    helm.sh/chart: common-app-0.0.1
    app.kubernetes.io/version: "0.0.1"
    app.kubernetes.io/managed-by: Helm
spec:
  project: system
  source:
    repoURL: https://traefik.github.io/charts
    chart: traefik
    targetRevision: 20.8.0
    helm:
      releaseName: traefik
      values: |
        env:
        - name: TZ
          value: Europe/Paris
        extraObjects:
        - apiVersion: traefik.containo.us/v1alpha1
          kind: Middleware
          metadata:
            name: redirect-https
          spec:
            redirectScheme:
              permanent: true
              scheme: https
        fullnameOverride: traefik
        ingressClass:
          enabled: true
          isDefaultClass: true
        ports:
          minio:
            expose: true
            exposedPort: 3882
            port: 3882
            protocol: TCP
            tls:
              enabled: true
        priorityClassName: system-cluster-critical
        providers:
          kubernetesIngress:
            publishedService:
              enabled: true
  destination:
    name: baku
    namespace: traefik
  syncPolicy:
    automated: 
      prune: true
      selfHeal: true    
    syncOptions:
      - CreateNamespace=true
