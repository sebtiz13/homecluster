{{- if .Values.serviceAccounts }}
svcaccts:
  {{ toYaml .Values.serviceAccounts | nindent 2 }}
{{- end }}
makeServiceAccountJob:
  annotations:
    argocd.argoproj.io/hook: PostSync
    argocd.argoproj.io/hook-delete-policy: HookSucceeded

minio:
  mode: standalone
  rootUser: <path:salamandre/data/minio/auth#rootUser>
  rootPassword: <path:salamandre/data/minio/auth#rootPassword>

  users: [] # Remove default user

  buckets:
    - name: tmp
      policy: none
    {{- range .Values.buckets }}
    - name: {{ .name }}
      policy: {{ .policy }}
    {{- end }}
  environment:
    MINIO_BROWSER_REDIRECT_URL: https://console.{{ include "ingress.host" . }}
  ingress:
    enabled: true
    annotations:
      traefik.ingress.kubernetes.io/router.entrypoints: websecure
    path: /
    hosts:
      - {{ include "ingress.host" . }}
    tls:
      - secretName: {{ include "ingress.tls.secretName" . }}
        hosts:
          - {{ include "ingress.host" . }}
  consoleIngress:
    enabled: true
    annotations:
      traefik.ingress.kubernetes.io/router.entrypoints: websecure
    hosts:
      - console.{{ include "ingress.host" . }}
    tls:
      - secretName: {{ include "ingress.tls.secretName" . }}
        hosts:
          - console.{{ include "ingress.host" . }}

  persistence:
    size: 10Gi

  resources:
    requests:
        cpu: 10m
        memory: 192Mi
    limits:
        cpu: 1000m
        memory: 1Gi
