injector:
  enabled: false

server:
  ingress:
    enabled: true
    annotations:
      traefik.ingress.kubernetes.io/router.entrypoints: websecure
    hosts:
      - host: {{ include "ingress.host" . }}
    tls:
      - hosts:
          - {{ include "ingress.host" . }}
        secretName: {{ include "ingress.tls.secretName" . }}

  {{/*
  Configure readiness probe to report "ready" even if Vault is uninitialized and sealed.
  Useful when bootstrapping Vault for the first time.
  */}}
  readinessProbe:
    path: "/v1/sys/health?standbyok=true&sealedcode=204&uninitcode=204"

  postStart:
    - /bin/sh
    - -c
    - "sleep 5 && if [ -f \"/vault/keys/key1\" ]; then vault operator unseal $(cat /vault/keys/key1); fi"

  dataStorage:
    size: 10Gi
    storageClass: openebs-zfspv

  volumes:
    - name: vault-keys
      secret:
        secretName: vault-keys
        defaultMode: 0400
        optional: true
  volumeMounts:
    - mountPath: /vault/keys
      name: vault-keys
      readOnly: true

ui:
  enabled: true
