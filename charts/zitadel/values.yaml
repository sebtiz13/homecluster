initJob:
  # Once ZITADEL is installed, the initJob can be disabled.
  enabled: true
  annotations:
    helm.sh/hook: pre-install,pre-upgrade
    helm.sh/hook-delete-policy: before-hook-creation
    helm.sh/hook-weight: "1"
  resources: {}
  backoffLimit: 5
  activeDeadlineSeconds: 300
  extraContainers: []
  podAnnotations: {}

zitadel:
  fullnameOverride: zitadel

  replicaCount: 1

  # Disable old init job
  initJob:
    enabled: false

external-secrets:
  fullnameOverride: zitadel

  secrets:
    - name: credentials
      annotations:
        helm.sh/hook: pre-install,pre-upgrade
        helm.sh/hook-delete-policy: before-hook-creation
        helm.sh/hook-weight: "0"
      target:
        template:
          type: Opaque
          data:
            masterkey: '{{`{{ .masterkey }}`}}'
            postgresql-password: '{{`{{ .password }}`}}'
            smtp-password: '{{`{{ .smtp_password }}`}}'
      dataFrom:
        - extract:
            key: salamandre/zitadel/database
