# Default values for adguard.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

images:
  configurator:
    repository: alpine
    pullPolicy: IfNotPresent
    tag: "3.17.0"
  adguard:
    repository: adguard/adguardhome
    pullPolicy: IfNotPresent
    # Overrides the image tag whose default is the chart appVersion.
    tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext:
  {}
  # fsGroup: 2000

securityContext:
  {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

resources:
  {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

livenessProbe:
  enabled: true
  port: 53
  initialDelaySeconds: 45
  periodSeconds: 45
  timeoutSeconds: 30
  failureThreshold: 3

services:
  http:
    type: ClusterIP
    port: 80
  https:
    enabled: true
    type: ClusterIP
    port: 443
  dns:
    enabled: true
    type: NodePort
    port: 53
  dnsOverTls:
    enabled: true
    type: NodePort
    port: 853
  dnsOverQuic:
    enabled: true
    type: NodePort
    port: 853
  dnscrypt:
    enabled: true
    type: NodePort
    port: 5443

ingresses:
  http:
    enabled: false
    className: ""
    annotations:
      {}
      # kubernetes.io/ingress.class: nginx
      # kubernetes.io/tls-acme: "true"
    hosts:
      - host: adguard-example.local
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls: []
    #  - secretName: chart-example-tls
    #    hosts:
    #      - chart-example.local
  https:
    enabled: false
    className: ""
    annotations:
      {}
      # kubernetes.io/ingress.class: nginx
      # kubernetes.io/tls-acme: "true"
    hosts:
      - host: adguard-example.local
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls: []
    #  - secretName: chart-example-tls
    #    hosts:
    #      - chart-example.local

hostNetwork:
  # Enable this for support DHCP service
  enabled: false
  ports:
    http: 80
    https: 443

    dhcp: 67
    dns: 53
    # DNS over TLS
    dot: 853
    # DNS over QUIC
    doq: 754
    dnscrypt: 5443

traefik:
  middleware:
    enabled: false

  tlsoptions:
    enabled: false

    spec:
      minVersion: VersionTLS12
      cipherSuites:
        - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 # TLS 1.2
        - TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305 # TLS 1.2
        - TLS_AES_256_GCM_SHA384 # TLS 1.3
        - TLS_CHACHA20_POLY1305_SHA256 # TLS 1.3
      curvePreferences:
        - CurveP521
        - CurveP384
      sniStrict: true

# Data persistence
persistence:
  # Whether storing persistent data is enabled or not
  enabled: false
  # The maximum size of the persisted data
  size: 5Gi
  # what storage name to be used for data storage
  # className: "gp2"

dnsOverTls:
  secretName: ""
  mountPath: /certificates/domain.tld

# Configuration file content
# See: https://github.com/AdguardTeam/AdGuardHome/wiki/Configuration#configuration-file
bootstrapConfig:
  bind_host: 0.0.0.0
  bind_port: 80
  beta_bind_port: 0
  users: []
  # - name: username
  #   password: password
  auth_attempts: 5
  block_auth_min: 15
  http_proxy: ""
  language: ""
  debug_pprof: false
  web_session_ttl: 720

  dns:
    bind_hosts:
      - 0.0.0.0
    port: 53
    statistics_interval: 1
    querylog_enabled: true
    querylog_file_enabled: true
    querylog_interval: 2160h
    querylog_size_memory: 1000
    anonymize_client_ip: false
    protection_enabled: true
    blocking_mode: default
    blocking_ipv4: ""
    blocking_ipv6: ""
    blocked_response_ttl: 10
    parental_block_host: family-block.dns.adguard.com
    safebrowsing_block_host: standard-block.dns.adguard.com
    ratelimit: 20
    ratelimit_whitelist: []
    refuse_any: true
    upstream_dns:
      - https://dns10.quad9.net/dns-query
    upstream_dns_file: ""
    bootstrap_dns:
      - 9.9.9.10
      - 149.112.112.10
      - 2620:fe::10
      - 2620:fe::fe:10
    all_servers: false
    fastest_addr: false
    fastest_timeout: 1s
    allowed_clients: []
    disallowed_clients: []
    blocked_hosts:
      - version.bind
      - id.server
      - hostname.bind
    trusted_proxies:
      - 127.0.0.0/8
      - ::1/128
    cache_size: 4194304
    cache_ttl_min: 0
    cache_ttl_max: 0
    cache_optimistic: false
    bogus_nxdomain: []
    aaaa_disabled: false
    enable_dnssec: false
    edns_client_subnet: false
    max_goroutines: 300
    handle_ddr: true
    ipset: []
    ipset_file: ""
    filtering_enabled: true
    filters_update_interval: 24
    parental_enabled: false
    safesearch_enabled: false
    safebrowsing_enabled: false
    safebrowsing_cache_size: 1048576
    safesearch_cache_size: 1048576
    parental_cache_size: 1048576
    cache_time: 30
    rewrites: []
    blocked_services: []
    upstream_timeout: 10s
    private_networks: []
    use_private_ptr_resolvers: true
    local_ptr_upstreams: []
    serve_http3: false
    use_http3_upstreams: false

  tls:
    enabled: false
    server_name: ""
    force_https: false
    port_https: 443
    port_dns_over_tls: 853
    port_dns_over_quic: 853
    port_dnscrypt: 0
    dnscrypt_config_file: ""
    allow_unencrypted_doh: false
    certificate_chain: ""
    private_key: ""
    certificate_path: ""
    private_key_path: ""
    strict_sni_check: false

  filters:
    - enabled: true
      url: https://adguardteam.github.io/AdGuardSDNSFilter/Filters/filter.txt
      name: AdGuard DNS filter
      id: 1
    - enabled: false
      url: https://adaway.org/hosts.txt
      name: AdAway Default Blocklist
      id: 2

  whitelist_filters: []
  user_rules: []

  dhcp:
    enabled: false
    interface_name: ""
    local_domain_name: lan
    dhcpv4:
      gateway_ip: ""
      subnet_mask: ""
      range_start: ""
      range_end: ""
      lease_duration: 86400
      icmp_timeout_msec: 1000
      options: []
    dhcpv6:
      range_start: ""
      lease_duration: 86400
      ra_slaac_only: false
      ra_allow_slaac: false

  clients:
    runtime_sources:
      whois: true
      arp: true
      rdns: true
      dhcp: true
      hosts: true
    persistent: []

  log_file: ""
  log_max_backups: 0
  log_max_size: 100
  log_max_age: 3
  log_compress: false
  log_localtime: false
  verbose: false

  os:
    group: ""
    user: ""
    rlimit_nofile: 0

  schema_version: 14
