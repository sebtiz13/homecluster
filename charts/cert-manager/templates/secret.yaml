{{- range $.Values.ovhIssuers }}
  {{- if .create }}
    {{- if or (and (.ovhAuthentication) (.ovhAuthenticationRef)) (and (not .ovhAuthentication) (not .ovhAuthenticationRef)) }}
      {{ fail "For each issuer you wish to create, you need to define either 'ovhAuthentication' or 'ovhAuthenticationRef'" }}
    {{- end }}
    {{- if eq (include "cert-manager-webhook-ovh.isOvhAuthenticationAvail" .ovhAuthentication) "true" }}
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: {{ printf "%s-ovh-credentials" .name }}
data:
  applicationKey: {{ .ovhAuthentication.applicationKey | b64enc | quote }}
  applicationSecret: {{ .ovhAuthentication.applicationSecret | b64enc | quote }}
  consumerKey: {{ .ovhAuthentication.consumerKey | b64enc | quote }}
    {{- end }}{{/* end if eq (include "cert..." */}}
  {{- end }}{{/* end if .create */}}
{{- end }}{{/* end range */}}
